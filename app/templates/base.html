<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Time-In{% endblock %}</title>
    <!-- Vuetify CSS -->
    <link href="https://cdn.jsdelivr.net/npm/vuetify@2.6.15/dist/vuetify.min.css" rel="stylesheet">
    <!-- Material Design Icons -->
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font/css/materialdesignicons.min.css" rel="stylesheet">
</head>
<body>
    <div id="app">
        <v-app>
            <!-- App Bar -->
            <v-app-bar app color="primary" dark>
                <v-toolbar-title>Time-In</v-toolbar-title>
                <v-spacer></v-spacer>
                <v-btn v-if="isAdmin && currentPath === '/admin'" text href="/dashboard">Employee</v-btn>
                <v-btn v-if="isAdmin && currentPath !== '/admin'" text href="/admin">Admin</v-btn>
                <v-btn v-if="currentPath !== '/login'" text href="/logout">Logout</v-btn>
            </v-app-bar>

            <!-- Main Content -->
            <v-main>
                <v-container>
                    <component :is="'{{ componentName }}'"></component>
                </v-container>
            </v-main>
        </v-app>
    </div>

    <!-- Vue.js -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <!-- Vuetify JS -->
    <script src="https://cdn.jsdelivr.net/npm/vuetify@2.6.15/dist/vuetify.js"></script>
    <!-- QoL .vue parser -->
    <script src="https://unpkg.com/http-vue-loader"></script>

    <script type="module">

        new Vue({
            el: '#app',
            vuetify: new Vuetify(),
            // Change Vue's delimiters so that flask doesn't try to 
            // interpret it as python
            delimiters: ['[[', ']]'],
            components: {
                // using httpVueLoader so we can have the
                // convenience of using .vue files
                {{ componentName }}: httpVueLoader("{{ url_for('static', filename='js/components/' ~ componentName ~ '.vue') }}")
            },
            data() {
                return {
                    // flask inserting whether user is admin
                    isAdmin: {{ 'true' if g.user.is_admin else 'false' }},
                    currentPath: window.location.pathname
                }
            }
        });
    </script>

</body>
</html>